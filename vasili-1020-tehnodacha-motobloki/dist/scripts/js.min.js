function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}$(function(){$("form").submit(function(a){if(a.preventDefault(),"undefined"!=typeof sessionStorage)if(!sessionStorage.getItem("formSubmitted"))sessionStorage.setItem("formSubmitted","true");else if(!confirm("\u0412\u044B \u0443\u0436\u0435 \u043E\u0442\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u0437\u0430\u044F\u0432\u043A\u0443, \u043F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C?"))return!1;var b=$(this).serializeArray();if(b.push({name:"source",value:"Tehnodacha"}),b.push({name:"title",value:"\u041C\u043E\u0442\u043E\u0431\u043B\u043E\u043A"}),b.push({name:"link",value:location.href}),$.ajax({type:"POST",url:"https://skidka-tut.by/action/index.php",headers:{"X-Requested-With":"XMLHttpRequest"},dataType:"json",data:b}).done(function(a){alert(a.text)}).fail(function(a,b){console.log(a,b),alert("\u0418\u0437\u0432\u0438\u043D\u0438\u0442\u0435, \u043F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u043F\u0440\u043E\u0441\u0430. \u0421\u0432\u044F\u0436\u0438\u0442\u0435\u0441\u044C \u0441 \u043C\u0435\u043D\u0435\u0434\u0436\u0435\u0440\u043E\u043C \u043F\u043E \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0443!")}),"function"==typeof Event)document.dispatchEvent(new Event("app.form.send"));else{var c=document.createEvent("Event");c.initEvent("app.form.send",!1,!1),document.dispatchEvent(c)}return!1}),$("a.smoothscroll").click(function(b){""!==this.hash&&(b.preventDefault(),b=this.hash,$("html, body").animate({scrollTop:$(b).offset().top-100},400))})}),document.addEventListener("DOMContentLoaded",function(){try{var a=document.querySelector(".btn-top");document.onscroll=function(){400<=window.pageYOffset?a.classList.add("active"):a.classList.remove("active")}}catch(a){console.log(a)}try{var b=function(a,b,c){var d=JSON.parse(localStorage.getItem(a));if(c)var e=_objectSpread(_objectSpread({},d),{},_defineProperty({},c,_objectSpread(_objectSpread({},d[c]),b)));else var e=_objectSpread(_objectSpread({},d),b);localStorage.setItem(a,JSON.stringify(e))},c=function(a,b){var c=_objectSpread({},e);delete c[b],localStorage.setItem(a,JSON.stringify(c))},d=function(){Array.prototype.forEach.call(document.querySelectorAll(".product-item"),function(a){var d=a.querySelector("input[name=\"product\"]").value;a.querySelector(".product-item__close").onclick=function(){c("tcart",d),f()},a.querySelector(".product-item__minus").onclick=function(){var a=--e[d].col,g=e[d].onePrice*a;0<a?(b("tcart",{col:a,price:g},d),f()):(c("tcart",d),f())},a.querySelector(".product-item__plus").onclick=function(){var a=++e[d].col,c=e[d].onePrice*a;b("tcart",{col:a,price:c},d),f()},a.querySelector(".product-item__col-span").onclick=function(){this.style.display="none",a.querySelector(".product-item__col-input").value=e[d].col,a.querySelector(".product-item__col-input").style.display="block",a.querySelector(".product-item__col-input").focus()},a.querySelector(".product-item__col-input").onblur=function(){if(this.style.display="none",0<this.value){var g=e[d].onePrice*this.value;b("tcart",{col:+this.value,price:g},d)}else c("tcart",d);f(),a.querySelector(".product-item__col-span").style.display="block"}})},e=JSON.parse(localStorage.getItem("tcart"));null===e&&localStorage.setItem("tcart",JSON.stringify({}));var f=function(){document.querySelector(".modal-product__total-price").innerHTML=0,e=JSON.parse(localStorage.getItem("tcart")),document.querySelector(".product-wrap").innerHTML="";var a={itogPrice:0,itogCol:0};for(var c in e)a.itogPrice+=e[c].price,a.itogCol+=e[c].col,document.querySelector(".product-wrap").innerHTML+="<div class=\"product-item my-2 font-weight-light\"><input type=\"hidden\" name=\"product\" value=\""+c+"\"><input type=\"hidden\" name=\"productName-col\" value=\""+e[c].title+"-"+e[c].col+"\"><div class=\"row align-items-center text-center\"><div class=\"col-3\"><img src=\""+e[c].img+"\"></div><div class=\"col-3 p-0 text-left\"><div class=\"form-item__title\">"+e[c].title+"</div></div><div class=\"col-3 d-flex justify-content-around\"><span class=\"product-item__minus\"><span class=\"fa-stack\"><i class=\"fa fa-circle-thin fa-stack-2x\"></i><i class=\"fa fa-minus fa-stack-1x\"></i></span></span><span class=\"product-item__col-span\">"+e[c].col+"</span><input class=\"product-item__col-input text-center\" style=\"display: none;\" type=\"number\" name=\"product-item__col\" /><span class=\"product-item__plus\"><span class=\"fa-stack\"><i class=\"fa fa-circle-thin fa-stack-2x\"></i><i class=\"fa fa-plus fa-stack-1x\"></i></span></span></div><div class=\"col-3 d-flex justify-content-around\"><span class=\"product-item__price\">"+e[c].price+" \u0440.</span><span class=\"product-item__close\"><span class=\"fa-stack\"><i class=\"fa fa-circle-thin fa-stack-2x\"></i><span class=\"fa-stack-1x\">&#10005;</span></span></span></div></div></div>";Object.keys(e).length?(b("itogCatalog",a),document.querySelector(".active-catalog").style.display="block",document.querySelector(".active-catalog__item").textContent=JSON.parse(localStorage.getItem("itogCatalog")).itogCol,document.querySelector(".active-catalog__col").textContent=JSON.parse(localStorage.getItem("itogCatalog")).itogPrice+" \u0440.",document.querySelector(".modal-product__total-price").textContent=JSON.parse(localStorage.getItem("itogCatalog")).itogPrice,d()):(localStorage.removeItem("itogCatalog"),document.querySelector(".active-catalog").style.display="none",$(".modal").modal("hide"))};f(),Array.prototype.forEach.call(document.querySelectorAll(".has-calculator, .modal-primer"),function(a){var c=a.querySelector("input[name=\"product\"]").value;a.classList.contains("modal-primer")&&(a.id="modal-"+a.querySelector("input[name=\"product\"]").value+"-primer"),a.querySelector(".has-calculator__img").href&&(a.querySelector(".has-calculator__img").dataset.fancybox=c,a.querySelector(".has-calculator__img").href=calculatorData[c].img),a.querySelector(".has-calculator__img img").src=calculatorData[c].img,a.querySelector(".has-calculator__btnDetails")&&(a.querySelector(".has-calculator__btnDetails").href="#modal-"+c+"-primer"),a.querySelector(".has-calculator__title").textContent=calculatorData[c].title,a.querySelector(".has-calculator__price").innerHTML="<div class=\"h3 text-red d-inline-block\"><span class=\"jPrice\">"+calculatorData[c].price+"</span> \u0440\u0443\u0431.</div>",calculatorData[c].priceOld&&(a.querySelector(".has-calculator__price").innerHTML+="<s class=\"h5 text-muted font-weight-light d-inline-block mx-2\"><span class=\"jPriceOld\">"+calculatorData[c].price+"</span> \u0440\u0443\u0431.</s>"),a.onclick=function(){if(event.target&&"#modal-product"===event.target.getAttribute("href"))if($(".modal").modal("hide"),e.hasOwnProperty(c)){var a=++e[c].col,d=e[c].onePrice*a;b("tcart",{col:a,price:d},c),f()}else{var g={col:1,onePrice:calculatorData[c].price},h=_objectSpread(_objectSpread({},e),{},_defineProperty({},c,_objectSpread(_objectSpread({},calculatorData[c]),g)));localStorage.setItem("tcart",JSON.stringify(h)),f()}}})}catch(a){console.log(a)}});