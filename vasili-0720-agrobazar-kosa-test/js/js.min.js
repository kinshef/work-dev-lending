$(document).ready(function(){$("form").submit(function(e){if(e.preventDefault(),"undefined"!=typeof sessionStorage)if(sessionStorage.getItem("formSubmitted")){if(!confirm("Вы уже отправили заявку, повторить?"))return!1}else sessionStorage.setItem("formSubmitted","true");var t,o=$(this).serializeArray();return o.push({name:"source",value:"Test"}),o.push({name:"title",value:"Test message"}),o.push({name:"link",value:location.href}),$.ajax({type:"POST",url:"https://skidka-tut.by/action/index.php",headers:{"X-Requested-With":"XMLHttpRequest"},dataType:"json",data:o}).done(function(e){alert(e.text)}).fail(function(e,t){console.log(e,t),alert("Извините, произошла ошибка запроса. Свяжитесь с менеджером по телефону!")}),"function"==typeof Event?document.dispatchEvent(new Event("app.form.send")):((t=document.createEvent("Event")).initEvent("app.form.send",!1,!1),document.dispatchEvent(t)),!1}),$("a.smoothscroll").click(function(e){var t;""!==this.hash&&(e.preventDefault(),t=this.hash,$("html, body").animate({scrollTop:$(t).offset().top},400))}),$("body").mouseleave(function(e){"undefined"!=typeof sessionStorage&&!sessionStorage.getItem("modalLeaveShowed")&&e.clientY<-12&&(sessionStorage.setItem("modalLeaveShowed","true"),$("#modal-leave").modal("show"))})});
document.addEventListener("DOMContentLoaded",function(){try{[].forEach.call(document.querySelectorAll("[data-animation]"),function(a){const b=new IntersectionObserver(c=>{c.forEach(c=>{if(c.isIntersecting){const c=a.dataset.animation.split(" ");a.classList.add(...c),a.addEventListener("animationend",function b(){a.classList.remove(...c),a.removeEventListener("animationend",b)}),b.unobserve(a)}})});b.observe(a)})}catch(a){console.error(a)}try{let a=new Date;a.setDate(a.getDay()?a.getDate()-a.getDay()+8:a.getDate()+1),a.setHours(0,0,0);new LightCountdown(".countdown-week",a,{animation:"animated flipInX",animationDuration:"600ms"})}catch(a){console.error(a)}});