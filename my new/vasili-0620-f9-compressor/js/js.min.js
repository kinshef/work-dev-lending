$(function(){$("form").submit(function(e){if(e.preventDefault(),"undefined"!=typeof sessionStorage)if(sessionStorage.getItem("formSubmitted")){if(!confirm("Вы уже отправили заявку, повторить?"))return!1}else sessionStorage.setItem("formSubmitted","true");var t,n=$(this).serializeArray();return n.push({name:"source",value:"Test"}),n.push({name:"title",value:"Test message"}),n.push({name:"link",value:location.href}),$.ajax({type:"POST",url:"https://skidka-tut.by/action/index.php",headers:{"X-Requested-With":"XMLHttpRequest"},dataType:"json",data:n}).done(function(e){alert(e.text)}).fail(function(e,t){console.log(e,t),alert("Извините, произошла ошибка запроса. Свяжитесь с менеджером по телефону!")}),"function"==typeof Event?document.dispatchEvent(new Event("app.form.send")):((t=document.createEvent("Event")).initEvent("app.form.send",!1,!1),document.dispatchEvent(t)),!1}),$("a.smoothscroll").click(function(e){""!==this.hash&&(e.preventDefault(),e=this.hash,$("html, body").animate({scrollTop:$(e).offset().top},400))}),$.fn.nav=function(e){var s={offset:0};$.extend(s,e);var a=this;$(a).each(function(e,t){var n=$(t.hash),o=$(n).offset();$(window).scroll(function(){var e=$(window).scrollTop()+s.offset;o.top<e&&e<o.top+$(n).height()&&($(a).removeClass("active"),$(t).addClass("active"))})})},$(".js-nav-scroll").nav({offset:150})}),document.addEventListener("DOMContentLoaded",function(){});